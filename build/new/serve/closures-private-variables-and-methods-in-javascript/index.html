<!DOCTYPE html>
<html>
  <head>
    <title>Closures - Private Variables and Methods in JavaScript – Marcelo Lazaroni – Developing for the Interwebs</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Developing for the Interwebs">
    <meta property="og:description" content="Developing for the Interwebs" />
    
    <meta name="author" content="Marcelo Lazaroni" />

    
    <meta property="og:title" content="Closures - Private Variables and Methods in JavaScript" />
    <meta property="twitter:title" content="Closures - Private Variables and Methods in JavaScript" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- All possible sizes of icons -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/images/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="/images/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/images/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/images/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/images/icons/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="/images/icons/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="/images/icons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="/images/icons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/icons/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="/images/icons/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="/images/icons/mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="/images/icons/mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="/images/icons/mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="/images/icons/mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="/images/icons/mstile-310x310.png" />


    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Marcelo Lazaroni - Developing for the Interwebs" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="body-wrapper">
      <div class="wrapper-masthead">
        <div class="container-masterhead">
          <header class="masthead clearfix">
            <a href="/" class="site-avatar"><img src="https://avatars1.githubusercontent.com/u/11493705?v=3&s=460" /></a>

            <div class="site-info">
              <h1 class="site-name"><a href="/">Marcelo Lazaroni</a></h1>
              <p class="site-description">Developing for the Interwebs</p>
            </div>

            <nav>
              <a href="/">blog</a>
              <a href="/about">about</a>
            </nav>
          </header>
        </div>
      </div>

      <div id="main" role="main" class="container">
        <article class="post">
  <h1>Closures - Private Variables and Methods in JavaScript</h1>

  <div class="entry">
    <p>Some languages such as Java allow us to declare methods and variables in a class
as private, restraining anything outside the class itself to access them.</p>

<p>This is very important to achieve encapsulation and conform to the best
practices of object oriented programing. Making a variable private also allows
the function to have total control over how it is manipulated.</p>

<p>JavaScript, however, does not allow you to specify whether variables and methods
of an object should be private or public in their declaration, but it does
give us a way to implement them as such.</p>

<p>Give a look at the following code:
<div>
  <pre><code class='javascript'>var myBankAccount = (function(){
  var balance = 0;</p>

<p>return{
    getBalance: function(){
                  return balance
                }
  }
})()</code></pre>
</div></p>

<p>Here we are declaring a variable, <code>myBankAccount</code>, and assigning something to it.
In the other sign of the assignment we are then declaring a function, but notice
that this function declaration is within brackets and at the end, in the last
line, there is a <code>()</code>. This means that we are invoking this function that we just
declared. So, <code>myBankAccount</code> is not being assigned the function, but because the
function is being called <code>myBankAccount</code> is being assigned the return value of
the function.</p>

<p>The return value of that function is an object with one property, <code>getBalance</code>.
But this object is very interesting
because unlike anything outside the function it has access to the
balance variable, which only exists inside the function. Even though the function
has returned already, because the returned object still references variables of
the the function, these variables become long lived and will not
be destroyed. We can get the balance by executing <code>myBankAccount.getBalance()</code>.</p>

<p>This way we have actually created an object with a private property. This is
called a <strong>closure</strong>.</p>

<p>Let&#39;s make it more interesting and add a couple more things.</p>

<div>
  <pre><code class='javascript'>var bankAccount = function(initialBalance){
  // Let's initialise the balance with the value passed as an argument
  // to the function.

  var balance = initialBalance;

  return {
    getBalance: function(){
      return balance
    },
    deposit: function(amount){
      // Let's add the amount to what we already have in the
      //  balance.
      balance += amount;
      // Return the new balance
      return balance;
    },
    withdraw: function(amount){
      // Check if we have enought money to withdraw all that.
      if(amount &lt;= balance){
        balance -= amount;
        return true;
      }
      else{
        return false;
      }
    }
  }
}

var marceloAccount = bankAccount(100);

marceloAccount.deposit(10) // 110
marceloAccount. withdraw(80) // true
marceloAccount. withdraw(80) // false</code></pre>
</div>

<p>Here we did a couple of things differently. Now we are not declaring an anonymous
function and calling it straight away, we are assigning the function to a variable
and only then we invoke the function variable to create an instance of the bank
account, which we assign to <code>karlAccount</code>. <code>bankAccount</code> returns an object with
three properties: <code>getBalance</code>, which gives us the current balance; <code>deposit</code>,
which adds to our balance; and <code>withdraw</code>, which takes money from the balance.</p>

<p>That&#39;s where closures really shine. Here we were able to use a private function,
<code>takeFromBalance</code>, to implement our specific rules to the way in which our
private variable should be changed. In this case we are not allowing it to be negative.</p>

<p>Closures are an excellent way to keep things tidy and working properly. With
closures we can build code that is more secure and more robust as we are
controlling how things are being changed. We can also build things that are easier
to test and debug, as we know exactly what has access to what, as well as easier
to reuse.</p>

  </div>

  <div class="date">
    Written on October  1, 2015
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'lazamar';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

</article>

      </div>
    </div>


    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          

<a href="https://www.facebook.com/marcelo.lazaroni.1"><i class="svg-icon facebook"></i></a>

<a href="https://github.com/lazamar"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/lazaroni"><i class="svg-icon linkedin"></i></a>


<a href="https://www.twitter.com/marcelolaza"><i class="svg-icon twitter"></i></a>


<a href="https://plus.google.com/101035105630256214146"><i class="svg-icon googleplus"></i></a>
        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-68439335-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/closures-private-variables-and-methods-in-javascript/',
		  'title': 'Closures - Private Variables and Methods in JavaScript'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
